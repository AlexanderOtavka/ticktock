<link rel="import" href="../../bower_components/polymer/polymer.html">

<script>
(function () {
'use strict';

Polymer({
  is: 'calendar-selector',

  properties: {
    calendars: {
      type: Array,
      observer: '_reselect',
      value: function () {
        return [];
      },
    },
    selectedCalendar: {
      type: Object,
      notify: true,
      readOnly: true,
    },
  },

  observers: [
    '_selectedHiddenChanged(selectedCalendar.hidden)',
  ],

  select: function (calendar) {
    var collection = Polymer.Collection.get(this.calendars);
    var newKey = collection.getKey(calendar);
    this._setSelectedCalendar(calendar);
    this.linkPaths('selectedCalendar', 'calendars.' + newKey);
  },

  _selectedHiddenChanged: function (hidden) {
    this.fire('selected-hidden-changed', { value: hidden });
  },

  _reselect: function () {
    this.select(this.selectedCalendar);
  },
});

})();
</script>
